## 1. 介绍

- ping 命令发出的报文是 ICMP 询问报文中的 “回送请求和回答”报文
- Windows 和  Linux 中都有 ping 命令，其作用和原理大致上是相同的，只是在参数上有所不同

## 2. 参数

​	

## 3. 实例



## 实例

这里以 ping 百度的域名举例

```bash
➜  ~ ping wwww.baidu.com
PING ps_other.a.shifen.com (220.181.38.251) 56(84) bytes of data.
64 bytes from 220.181.38.251 (220.181.38.251): icmp_seq=1 ttl=49 time=69.8 ms
64 bytes from 220.181.38.251 (220.181.38.251): icmp_seq=2 ttl=49 time=92.4 ms
64 bytes from 220.181.38.251 (220.181.38.251): icmp_seq=3 ttl=49 time=115 ms
^C
--- ps_other.a.shifen.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 69.833/92.343/114.811/18.362 ms

```

- 220.181.38.251

  这是根据 百度 的域名解析出来的 ip 地址

- ttl=49

  TTL （Time To Live）生存时间：由百度的服务器来指定，指定数据包被路由器丢弃之前允许通过的网段数量

  可以返回来的数据包TTL值为49，接近64，可以初步断定其是Linux操作系统，中间经过10个路由器到达本机因此TTL变为54

- time=69.8 ms

  表示 icmp 响应报文返回的时间。可粗略反应当前网络的状况

  

### 实例1 -- 检测网络是否连同

ping 最长用来简单和目的主机是否连同。前提是目的主机没有禁用 ping 命令（目）

### 实例2 -- 域名解析

ping 命令的对象可以是一个域名或者是一个 ip，如果是一个域名的，首先会访问域名服务器来解析域名。

我们可以根据这个来判断域名对应的 ip 

### 实例2 - 测试域名解析

ping 命令可以用来简单简单本机的域名解析是否出现问题。

由于 ping 命令的对象可以为 `域名` 或者 `ip地址`。我们可以通过 ping 命令来 ping 域名和ip，如果域名没有ping 通，而 ip 是 ping 通的。说明是本地的 DNS 出了问题。

### 实例3 - 检测操作系统类型

目的主机对 ping 命令可能有一个回送报文，我们可以通过 TTL 的值来猜测目的主机的操作系统的类型

值得注意的是，服务器的 TTL 的值是可以被修改的，因此我们是不能直接就判断目的主机的操作系统类型。（可以作为参考）

```
TTL值在100至130之间，主机系统为WINDOWS
TTL值在240至255之间，主机系统为UNIX或LINUX
```

### 实例4 - 检测网络状况

可根据 ping 命令的响应时间来判断当前网络的状况

实际上，通过 ICMP 报文的回送时间我们可以简单来判断当前主机的网络状况

### 实例5  -- 检测代理

首选明确一点，ping 命令是不能用来检测 http/socks代理是否生效。但是可以用来检测 VPN 是否生效



2021-10-05 05:00:20  -- 2021-10-05 05:32:27