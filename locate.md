## Locate

### 1. 引言

**`locate`命令用来查找文件或目录。**

`locate`命令要比其他查找文件命令（例如:`find`）快得多，原因在于它不搜索具体目录，而是搜索一个数据库`/var/lib/mlocate/mlocate.db`。

`/var/lib/mlocate/mlocate.db`这个数据库中含有本地所有文件信息。Linux 系统自动创建这个数据库，并且每天自动更新一次，因此，我们在用`locate`查找文件时，有时会找到已经被删除的数据，或者刚刚建立文件，却无法查找到，原因就是因为数据库文件没有被更新。为了避免这种情况，可以在使用`locate`之前，先使用`updatedb`命令，手动更新数据库。

接下让我们详细的学习`locate`和`updatedb`的使用方法。

### 2. 命令

`locate`具体命令如下：

```
locate　命令参数　文件/目录
```

常用命令参数如下：

```
-c, --count            只输出找到的数量；
-d, --database DBPATH  使用DBPATH指定的数据库，而不是默认数据库 /var/lib/mlocate/mlocate.db；
-i, --ignore-case      忽略大小写；
-q, --quiet            安静模式，不会显示任何错误讯息；
-e, --existing         只显示当前存在的文件条目；
```

### 3. 实例

```bash
locate -i "*html*.pdf"
```



### 4. updatedb

`updatedb`命令用来创建或更新`locate`命令所必需的数据库文件。

`updatedb`命令的执行过程较长，因为在执行时它会遍历整个系统的目录树，并将所有的文件信息写入`locate`数据库文件中。

```
1. `-o<文件>：忽略默认的数据库文件，使用指定的slocate数据库文件；`
2. `-U<目录>：更新指定目录的slocate数据库；`
3. `-v：显示执行的详细过程;`
```



执行权限：`updatedb`必须以`root`权限才能执行，如果是普通用户想执行`updatedb`时，需要在命令前加`sudo`命令来提升权限为`root`权限。

删除文件后直接使用`locate`去查找是可以定位到的，但是此时文件已经不存在了，原因是没有马上更新数据库。





2021-09-01 23:53:39 --  2021-09-02 15:53:37